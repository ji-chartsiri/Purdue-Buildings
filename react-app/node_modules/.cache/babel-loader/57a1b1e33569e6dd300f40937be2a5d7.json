{"ast":null,"code":"import _classCallCheck from\"/Users/cj/Purdue-Buildings/react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/cj/Purdue-Buildings/react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/cj/Purdue-Buildings/react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/cj/Purdue-Buildings/react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/cj/Purdue-Buildings/react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/cj/Purdue-Buildings/react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import Menu from'./modules/Menu';import Mymap from'./modules/Mymap';var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(props){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this,props));_this.state={mode:'finder',building:'WALC',floor:'0',findRoomId:'',sourceRoomId:'',marker:{position:[],floor:'0'},routeLine:{},mapBounds:[[0,1651],[976,0]]};_this.handleChangeFloor=_this.handleChangeFloor.bind(_assertThisInitialized(_this));_this.validateId=_this.validateId.bind(_assertThisInitialized(_this));_this.handleChangeFinder=_this.handleChangeFinder.bind(_assertThisInitialized(_this));_this.handleSubmitFinder=_this.handleSubmitFinder.bind(_assertThisInitialized(_this));_this.handleChangeRouterSource=_this.handleChangeRouterSource.bind(_assertThisInitialized(_this));_this.handleEndModeRouter=_this.handleEndModeRouter.bind(_assertThisInitialized(_this));_this.handleSubmitRouter=_this.handleSubmitRouter.bind(_assertThisInitialized(_this));return _this;}_createClass(App,[{key:\"handleChangeFloor\",value:function handleChangeFloor(x){this.setState({floor:x});}},{key:\"validateId\",value:function validateId(id){var allNodes=require('./json/'+this.state.building+'.json')[1];return typeof id==='string'&&id in allNodes;}},{key:\"handleChangeFinder\",value:function handleChangeFinder(event){this.setState({findRoomId:event.target.value.split('').map(function(x){return typeof x=='string'?x.toUpperCase():x;}).join(''),marker:{position:[],floor:'0'},mode:this.state.mode==='router'?'router':'finder'});}},{key:\"handleSubmitFinder\",value:function handleSubmitFinder(event){if(this.state.mode==='found')this.setState({mode:'router'});else if(this.state.mode==='router')this.handleSubmitRouter(event);else if(!this.validateId(this.state.findRoomId))alert('Please input valid room number');else{var allNodes=require('./json/'+this.state.building+'.json')[1];this.setState({marker:{position:[allNodes[this.state.findRoomId].lat,allNodes[this.state.findRoomId].lon],floor:allNodes[this.state.findRoomId].floor},floor:allNodes[this.state.findRoomId].floor,mode:'found'});}event.preventDefault();}},{key:\"handleChangeRouterSource\",value:function handleChangeRouterSource(event){this.setState({sourceRoomId:event.target.value.split('').map(function(x){return typeof x=='string'?x.toUpperCase():x;}).join('')});}},{key:\"handleEndModeRouter\",value:function handleEndModeRouter(event){this.setState({mode:'finder',sourceRoomId:'',routeLine:{}});event.preventDefault();}},{key:\"handleSubmitRouter\",value:function handleSubmitRouter(event){if(!this.validateId(this.state.sourceRoomId))alert('Please input valid source room number');else if(!this.validateId(this.state.findRoomId))alert('Please input valid destination room number');else{var allNodes=require('./json/'+this.state.building+'.json')[1];for(var i in allNodes){allNodes[i].isVisited=false;allNodes[i].from='';}for(var _i in allNodes){for(var j in allNodes[_i].adj){if(!allNodes[allNodes[_i].adj[j]].adj.includes(_i))allNodes[allNodes[_i].adj[j]].adj.push(_i);}}var consideringNodes=[this.state.sourceRoomId];while(consideringNodes.length>0){var currentNode=consideringNodes.shift();if(allNodes[currentNode].isVisited)continue;allNodes[currentNode].isVisited=true;if(currentNode===this.state.findRoomId){var routeLine={};var allFloors=require('./json/'+this.state.building+'.json')[0].floors;for(var _i2 in allFloors){routeLine[allFloors[_i2]]=[];}while(true){routeLine[allNodes[currentNode].floor].push([allNodes[currentNode].lat,allNodes[currentNode].lon]);if(currentNode===this.state.sourceRoomId)break;currentNode=allNodes[currentNode].from;}this.setState({routeLine:routeLine,floor:allNodes[currentNode].floor,marker:{position:[allNodes[this.state.findRoomId].lat,allNodes[this.state.findRoomId].lon],floor:allNodes[this.state.findRoomId].floor}});break;}for(var _i3 in allNodes[currentNode].adj){if(!allNodes[allNodes[currentNode].adj[_i3]].isVisited){allNodes[allNodes[currentNode].adj[_i3]].from=currentNode;consideringNodes.push(allNodes[currentNode].adj[_i3]);}}}}event.preventDefault();}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"App\"},React.createElement(Menu,{mode:this.state.mode,building:this.state.building,floor:this.state.floor,allFloors:require('./json/'+this.state.building+'.json')[0].floors,handleChangeFloor:this.handleChangeFloor,sourceRoomId:this.state.sourceRoomId,handleChangeRouterSource:this.handleChangeRouterSource,handleEndModeRouter:this.handleEndModeRouter,findRoomId:this.state.findRoomId,handleChangeFinder:this.handleChangeFinder,handleSubmitFinder:this.handleSubmitFinder}),React.createElement(Mymap,{mapBounds:this.state.mapBounds,imageUrl:require('./img/'+this.state.building+'/'+this.state.floor+'.jpg'),imageBounds:[[this.state.mapBounds[1][0],0],[0,this.state.mapBounds[0][1]]],marker:this.state.marker.floor===this.state.floor?this.state.marker:{position:[],floor:this.state.marker.floor},routeLine:typeof this.state.routeLine[this.state.floor]=='undefined'?[]:this.state.routeLine[this.state.floor]}));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/cj/Purdue-Buildings/react-app/src/App.js"],"names":["React","Menu","Mymap","App","props","state","mode","building","floor","findRoomId","sourceRoomId","marker","position","routeLine","mapBounds","handleChangeFloor","bind","validateId","handleChangeFinder","handleSubmitFinder","handleChangeRouterSource","handleEndModeRouter","handleSubmitRouter","x","setState","id","allNodes","require","event","target","value","split","map","toUpperCase","join","alert","lat","lon","preventDefault","i","isVisited","from","j","adj","includes","push","consideringNodes","length","currentNode","shift","allFloors","floors","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Menu from './modules/Menu'\nimport Mymap from './modules/Mymap'\n\nclass App extends React.Component {\n\n  constructor(props) {\n    super(props)\n    this.state = {\n        mode: 'finder',\n        building: 'WALC',\n        floor: '0',\n        findRoomId: '',\n        sourceRoomId: '',\n        marker: {position: [], floor: '0'},\n        routeLine:  {},\n        mapBounds: [[0, 1651], [976, 0]]\n    }\n\n    this.handleChangeFloor = this.handleChangeFloor.bind(this)\n    this.validateId = this.validateId.bind(this)\n    this.handleChangeFinder = this.handleChangeFinder.bind(this)\n    this.handleSubmitFinder = this.handleSubmitFinder.bind(this)\n    this.handleChangeRouterSource = this.handleChangeRouterSource.bind(this)\n    this.handleEndModeRouter = this.handleEndModeRouter.bind(this)\n    this.handleSubmitRouter = this.handleSubmitRouter.bind(this)\n  }\n\n  handleChangeFloor(x) {\n    this.setState({floor: x})\n  }\n\n  validateId(id) {\n\n    let allNodes = require('./json/' + this.state.building + '.json')[1]\n    return (typeof id === 'string' && id in allNodes)\n  }\n\n  handleChangeFinder(event) {\n    this.setState({\n      findRoomId: event.target.value.split('').map(x => typeof x == 'string' ? x.toUpperCase() : x).join(''),\n      marker: {position: [], floor: '0'},\n      mode: (this.state.mode === 'router' ? 'router' : 'finder')\n    })\n  }\n\n  handleSubmitFinder(event) {\n    if(this.state.mode === 'found') \n      this.setState({mode: 'router'})\n    else if(this.state.mode === 'router')\n      this.handleSubmitRouter(event)\n    else if(!this.validateId(this.state.findRoomId))\n      alert('Please input valid room number')\n    else{\n      let allNodes = require('./json/' + this.state.building + '.json')[1]\n      this.setState({\n        marker: {\n          position: [allNodes[this.state.findRoomId].lat, allNodes[this.state.findRoomId].lon],\n          floor: allNodes[this.state.findRoomId].floor\n        },\n        floor: allNodes[this.state.findRoomId].floor,\n        mode: 'found'\n      })\n    }\n    event.preventDefault()\n  }\n\n  handleChangeRouterSource(event) {\n    this.setState({sourceRoomId: event.target.value.split('').map(x => typeof x == 'string' ? x.toUpperCase() : x).join('')})\n  }\n\n  handleEndModeRouter(event) {\n    this.setState({mode: 'finder', sourceRoomId: '', routeLine: {}})\n    event.preventDefault()\n  }\n\n  handleSubmitRouter(event) {\n    if(!this.validateId(this.state.sourceRoomId))\n      alert('Please input valid source room number')\n    else if(!this.validateId(this.state.findRoomId))\n      alert('Please input valid destination room number')\n    else {\n      let allNodes = require('./json/' + this.state.building + '.json')[1]\n\n      for(let i in allNodes) {\n        allNodes[i].isVisited = false\n        allNodes[i].from = ''\n      }\n\n      for(let i in allNodes)\n        for(let j in allNodes[i].adj)\n          if(!allNodes[allNodes[i].adj[j]].adj.includes(i))\n            allNodes[allNodes[i].adj[j]].adj.push(i)\n\n      let consideringNodes = [this.state.sourceRoomId]\n\n      while(consideringNodes.length > 0) {\n        let currentNode = consideringNodes.shift()\n        if(allNodes[currentNode].isVisited)\n          continue\n        allNodes[currentNode].isVisited = true\n\n        if(currentNode === this.state.findRoomId) {\n          let routeLine = {}\n          let allFloors = (require('./json/' + this.state.building + '.json')[0]).floors\n\n          for(let i in allFloors)\n            routeLine[allFloors[i]] = []\n\n          while(true) {\n            routeLine[allNodes[currentNode].floor].push([allNodes[currentNode].lat, allNodes[currentNode].lon]) \n            if(currentNode === this.state.sourceRoomId)\n              break \n            currentNode = allNodes[currentNode].from\n          }\n          this.setState({\n            routeLine: routeLine, \n            floor: allNodes[currentNode].floor,\n            marker: {position: [allNodes[this.state.findRoomId].lat, allNodes[this.state.findRoomId].lon], \n              floor: allNodes[this.state.findRoomId].floor}\n          })\n          break\n        }\n\n        for(let i in allNodes[currentNode].adj)\n          if(!allNodes[allNodes[currentNode].adj[i]].isVisited) {\n            allNodes[allNodes[currentNode].adj[i]].from = currentNode\n            consideringNodes.push(allNodes[currentNode].adj[i])\n          }\n      }\n    }\n    event.preventDefault()\n  }\n\n  render() {\n    return (\n      <div className='App'>\n        <Menu \n          mode={this.state.mode}\n\n          building={this.state.building}\n          floor={this.state.floor}\n          allFloors={(require('./json/' + this.state.building + '.json')[0]).floors}\n          handleChangeFloor={this.handleChangeFloor}\n\n          sourceRoomId={this.state.sourceRoomId}\n          handleChangeRouterSource={this.handleChangeRouterSource}\n          handleEndModeRouter={this.handleEndModeRouter}\n\n          findRoomId={this.state.findRoomId}\n          handleChangeFinder={this.handleChangeFinder}\n          handleSubmitFinder={this.handleSubmitFinder}\n        />\n        <Mymap \n          mapBounds={this.state.mapBounds} \n          imageUrl={require('./img/' + this.state.building + '/' + this.state.floor + '.jpg')} \n          imageBounds={[[this.state.mapBounds[1][0],0], [0, this.state.mapBounds[0][1]]]}\n          marker={this.state.marker.floor === this.state.floor ? this.state.marker : {position: [], floor: this.state.marker.floor}}\n          routeLine={typeof this.state.routeLine[this.state.floor] == 'undefined' ? [] : this.state.routeLine[this.state.floor]}\n        />\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}